<link href="/App_Plugins/Merchello/Common/Css/merchello.css" rel="stylesheet">
<div ng-controller="Merchello.Dashboards.Order.FullListController" ng-show="loaded">
    <umb-panel>

        <merchello-panel>
            <umb-header>

                <div class="span4">
                    <div class="umb-headline-editor-wrapper">
                        <h1 class="umb-headline">Reports - All Sales For CSV</h1>
                    </div>
                </div>

                <div class="span8">
                    <div class="btn-toolbar pull-right umb-btn-toolbar">

                        <div class="btn-group">
                            <a class="btn btn-primary" id="orderdownloadcsv" data-ng-click="downloadOrderCSV()">Export</a>
                        </div>
                    </div>
                </div>

            </umb-header>
            <!-- Tabular Order List -->
            <div class="merchello-pane">
                <!-- Pagination -->
                <input type="hidden" data-ng-model="limitAmount" value="10000" />
                <!-- Loader -->
                <div class="pager" data-ng-show="!salesLoaded">
                    <img src="/umbraco/assets/img/loader.gif" />
                </div>
                <!-- List of Sales -->
                <table id="orderListTable" class="table table-hover merchello-selectable-table" data-ng-show="salesLoaded">
                    <thead>
                        <tr data-ng-show="!visible.bulkActionDropdown">
                            <th>
                                <input type="checkbox" data-ng-model="selectAllOrders" data-ng-click="updateBulkActionDropdownStatus(true)" />
                            </th>
                            <th data-ng-click="changeSortOrder('invoiceNumber')" data-ng-class="{'sorted': sortProperty == 'invoiceNumber' ||  sortProperty == '-invoiceNumber'}">
                                <i data-ng-class="{'icon-navigation-up': sortProperty == 'invoiceNumber', 'icon-navigation-down': sortProperty == '-invoiceNumber'}"></i>
                                <localize key="merchelloOrder_invoiceNumber" />
                            </th>
                            <th data-ng-click="changeSortOrder('invoiceDate')" data-ng-class="{'sorted': sortProperty == 'invoiceDate' ||  sortProperty == '-invoiceDate'}">
                                <i data-ng-class="{'icon-navigation-up': sortProperty == 'invoiceDate', 'icon-navigation-down': sortProperty == '-invoiceDate'}"></i>
                                <localize key="general_date" />
                            </th>
                            <th data-ng-click="changeSortOrder('billToName')" data-ng-class="{'sorted': sortProperty == 'billToName' ||  sortProperty == '-billToName'}">
                                <i data-ng-class="{'icon-navigation-up': sortProperty == 'billToName', 'icon-navigation-down': sortProperty == '-billToName'}"></i>
                                <localize key="merchelloGeneral_customer" />
                            </th>
                            <th>
                                <localize key="merchelloOrder_paymentStatus" />
                            </th>
                            <th>
                                <localize key="merchelloOrder_fulfillmentStatus" />
                            </th>
                            <th>
                                <localize key="merchelloGeneral_total" />
                            </th>
                        </tr>
                        <!-- Displays the bulk action button & dropdown menu when the checkbox is selected, which replaces normal heading TR -->
                        <tr data-ng-show="visible.bulkActionDropdown">
                            <th><input type="checkbox" data-ng-model="selectAllOrders" data-ng-click="updateBulkActionDropdownStatus(true)" /></th>
                            <th colspan="6">
                                <div class="btn-group">
                                    <a href="#" class="btn dropdown-toggle" data-toggle="dropdown">Bulk Action ({{selectedOrderCount}} orders selected) <i class="icon-navigation-down"></i></a>
                                    <ul class="dropdown-menu">
                                        <li><a href="#">Print Orders</a></li>
                                        <li><a href="#">Print Pull Lists</a></li>
                                        <li><a href="#">Capture Payments</a></li>
                                        <li><a href="#">Fulfill Orders</a></li>
                                        <li><hr /></li>
                                        <li><a href="#">Archive Orders</a></li>
                                        <li><a href="#">Unarchive Orders</a></li>
                                    </ul>
                                </div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Invoices -->
                        <tr data-ng-repeat="invoice in invoices | orderBy:sortProperty" data-ng-class="{active: invoice.selected}" data-ng-click="updateBulkActionDropdownStatus(false, invoice.key)">
                            <td><input type="checkbox" data-ng-model="invoice.selected" data-ng-click="invoice.selected = !invoice.selected" /></td>
                            <td>#<a data-ng-href="#/merchello/merchello/OrderView/{{invoice.key}}">{{invoice.invoiceNumber}}</a></td>
                            <td>{{invoice.invoiceDate | date : settings.dateFormat}}</td>
                            <td>{{invoice.billToName}}</td>
                            <td><span class="label" data-ng-class="{ 'label-success': invoice.getPaymentStatus()=='Paid', 'label-info': invoice.getPaymentStatus()=='Unpaid' }"><i data-ng-class="{ 'icon-check': invoice.getPaymentStatus()=='Paid', 'icon-loading': invoice.getPaymentStatus()=='Unpaid' }"></i> {{invoice.getPaymentStatus()}}</span></td>
                            <td><span class="label" data-ng-class="{ 'label-success': invoice.getFulfillmentStatus()=='Fulfilled', 'label-warning': invoice.getFulfillmentStatus()=='Not Fulfilled', 'label-info': invoice.getFulfillmentStatus()=='Partial' }"><i data-ng-class="{ 'icon-check': invoice.getFulfillmentStatus()=='Fulfilled', 'icon-alert': invoice.getFulfillmentStatus()=='Not Fulfilled', 'icon-loading': invoice.getFulfillmentStatus()=='Partial' }"></i> {{invoice.getFulfillmentStatus()}}</span></td>
                            <td>{{invoice.total | currency : currencySymbol}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </merchello-panel>
    </umb-panel>
</div>
